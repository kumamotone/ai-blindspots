
+++
title = "科学的デバッグ"
slug = "scientific-debugging"
date = "2025-03-09T22:18:30-04:00"
tags = []
+++

バグを直す方法として、大きく分けると「勘に頼って適当に直してみる」か、「系統立てて問題を切り分け、想定と実際の挙動のズレを特定する」の2種類があります。後者の科学的デバッグのほうが、手間はかかるかもしれませんが、一度しっかり理解すれば次に同様の問題が起きたときにも役立ちます。

推論能力が限定的なモデルは科学的手法というより「とりあえず一発で直しに行く」スタイルです。エージェントモードであれば、テストを実行して失敗すれば別のパッチを出す、というふうに試行錯誤はできますが、多くの場合は無作為に試してループに陥るだけになるでしょう。

噂では、デバッグにはより推論性能の高いモデル（Grok 3やDeepSeek-R1のようなもの）を使うとよいと言われています。個人的には、LLMにすべて任せるよりも、自分である程度原因を特定し、LLMには修正作業だけを任せるというやり方でも生産性は充分上がると感じています。「原因はここだ」と特定してあげれば、LLMはそこを修正するコードを書いてくれますし、広範囲での修正や周辺処理も併せてやってくれることがあります。

## 例

- 環境構成が壊れている（あるライブラリがインストールされていない等）状態でエージェントLLMにタスクを渡すと、状況を正しく把握できず無駄な修正を繰り返して死のループに陥ることがあります。Sonnet 3.7は特に `pip` が使えると思い込む傾向が強く、実際に `pip` が存在しない仮想環境で延々と `pip install` を試し続けるといった無意味な試行を行います。

