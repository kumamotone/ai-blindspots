
+++
title = "メメント"
slug = "memento"
date = "2025-03-07T20:35:24-05:00"
tags = []
+++

映画『メメント』では、主人公は新しい記憶を形成できないため、妻を殺した犯人を探すのにメモなどの手段に頼るしかありません。

この映画と同様に、使っているLLMにも「記憶」はありません。リクエストを送るたびに、そのタスクに必要なだけのコンテキスト（プロンプト、Cursor ルール、読み込まれたファイルなど）を再構築し、モデル自身がエージェントモードで必要なファイルを参照する、という動きしかできません。これがすべてです！ モデルはあなたのコードベースを、毎回ゼロから高速で「再理解」しているのです。

「熊が上手に踊ることに驚くのではない。熊が踊れること自体が驚きなのだ」という言葉がありますが、LLMが毎回コードベースを再度理解しようとするのは確かにすごいことです。ただ、その挙動はとても脆く、もしコンテキストに必要なファイルがなかったり情報が不足していれば、誤った理解をもとに作業を進めてしまい、大惨事につながる可能性もあります。

モデルに正しい行動をとってほしいなら、ドキュメントを整備し、それを参照可能にする（プロンプト経由でもよいし、モデルが期待する場所に置くのでもよい）などの工夫が必要です。大きな変更を依頼する場合は、その前に「プロジェクト全体の整合性をどう保ちたいのか」というコンテキストを与え、モデルが誤った理解のまま突き進まないように気をつけましょう。

## 例

- すでに存在するプロジェクトでE2Eテストを行う手法を考えてほしいとSonnet 3.7に依頼したところ、プロジェクトの目的自体が「テストのためだけ」と解釈されてしまい、リポジトリのREADMEまで全てテスト用の説明に書き換えられてしまいました。

